apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
nameSuffix: "-prod"
resources:
  - ../../../../../apps/websites/goreportcard/
  - ../../../../../apps/filehosting/immich/
  # - ../../../../../apps/productivity/plane/
patches:
  - target:
      kind: Application
      name: goreportcard
    path: ../../../../../common/patches/argocd-app-settings.yaml
  - target:
      kind: Application
      name: immich
    path: ../../../../../common/patches/argocd-app-settings.yaml
  - target:
      kind: Ingress
      name: immich-prod
    patch: |-
      $patch: delete
      apiVersion: networking.k8s.io/v1
      kind: Ingress
      metadata:
        name: immich-ingress
  - target:
      kind: PersistentVolumeClaim
      name: immich-data-prod
    patch: |-
      $patch: delete
      apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: immich-storage
  # - target:
  #     kind: Application
  #     name: plane
  #   path: ../../../../../common/patches/argocd-app-settings.yaml